tinymce.PluginManager.add('oocquestions', function(editor, url) {
  // Add a button that opens a window
  
  console.log(editor.getParam("sessionid"));
  var sessionid = editor.getParam("sessionid");
  editor.addButton('oocquestions', {
    text: 'Add Question',
    icon: false,
    onclick: function() {
      // Open windo
      editor.windowManager.open({
        title: 'Add Questions',
        url: "tinymce/js/tinymce/plugins/oocquestions/dialog.php?PHPSESSID=" + sessionid,
        width: 1000,
        height: 700,
        //body: [
        //  {type: 'textbox', name: 'title', label: 'Title'}
        //],
        onsubmit: function(e) {
          // Insert content when the window form is submitted
          editor.insertContent('Title: ' + e.data.title);
        }
      },{
           sessionid: sessionid
      });
    }
  });

  // Adds a menu item to the tools menu
  editor.addMenuItem('oocquestions', {
    text: 'Add Question',
    context: 'tools',
    onclick: function() {
      // Open window with a specific url
      editor.windowManager.open({
        title: 'TinyMCE site',
        url: "tinymce/js/tinymce/plugins/oocquestions/dialog.php?PHPSESSID=" + sessionid,
        width: 800,
        height: 700,
        buttons: [{
          text: 'Close',
          onclick: 'close'
        }]
      });
    }
  });
});
